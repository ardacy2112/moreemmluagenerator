<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>MOREEMM Lua Generator</title>
<style>
body{margin:0;background:#020617;color:#22c55e;font-family:Segoe UI}
.box{width:480px;margin:8% auto;background:#0f172a;padding:30px;border-radius:18px;box-shadow:0 0 30px #22c55e66}
input,button{width:100%;padding:14px;border-radius:12px;border:none;margin-top:12px;background:#020617;color:white}
button{background:linear-gradient(90deg,#22c55e,#0ea5e9,#a855f7);color:black;font-weight:800}
.console{background:#020617;margin-top:15px;height:160px;padding:10px;overflow:auto;font-family:monospace}
</style>
</head>
<body>

<div class="box">
<h2>MOREEMM LUA GENERATOR</h2>
<input id="appid" placeholder="Steam AppID">
<button onclick="run()">Generate ZIP</button>
<div id="log" class="console"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

<script>
const KEY_URL="https://raw.githubusercontent.com/SteamAutoCracks/ManifestHub/main/depotkeys.json";

function log(t){
 let d=document.createElement("div");
 d.textContent=t;
 logbox.appendChild(d);
 logbox.scrollTop=99999;
}
const logbox=document.getElementById("log");

async function run(){
 let id=appid.value.trim();
 if(!id)return;

 log("Fetching depot keys...");
 let keys=await fetch(KEY_URL).then(r=>r.json());

 log("Fetching Steam data...");
 let data=await fetch("https://api.steamcmd.net/v1/info/"+id).then(r=>r.json());

 let depots=data.data[id].depots;
 if(!depots){ log("‚ùå No depots found"); return; }

 let lua=[];
 lua.push("-- Generated by MOREEMM");
 lua.push(`addappid(${id})`);

 for(let d in depots){
  if(!depots[d].manifests?.public) continue;

  let manifest=depots[d].manifests.public;
  let key=keys[d]||"";

  lua.push(`addappid(${d}, 1, "${key}")`);
  lua.push(`setManifestid(${d},"${manifest}")`);
 }

 log("Lua built ‚úî");

 let zip=new JSZip();
 zip.file(id+".lua", lua.join("\n"));

 let blob=await zip.generateAsync({type:"blob"});
 let a=document.createElement("a");
 a.href=URL.createObjectURL(blob);
 a.download=id+".zip";
 a.click();

 log("ZIP downloaded üì¶");
}
</script>
</body>
</html>
