<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>MOREEMM LUA Generator</title>
<style>
body{
background:linear-gradient(135deg,#020617,#0f172a);
color:#e5e7eb;
font-family:Segoe UI,Arial;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
}
.wrap{
background:#020617;
padding:40px;
border-radius:20px;
width:440px;
box-shadow:0 0 40px rgba(0,0,0,.8);
}
h1{text-align:center;margin-bottom:10px;}
input{
width:100%;
padding:14px;
border-radius:12px;
border:none;
background:#0f172a;
color:white;
font-size:16px;
}
button{
width:100%;
margin-top:16px;
padding:14px;
border:none;
border-radius:12px;
background:#22c55e;
font-size:16px;
cursor:pointer;
transition:.2s;
}
button:hover{transform:scale(1.03);}
.loader{
margin-top:18px;
height:8px;
background:#0f172a;
border-radius:8px;
overflow:hidden;
display:none;
}
.bar{
height:100%;
width:0%;
background:#22c55e;
animation:load 1.5s infinite;
}
@keyframes load{
0%{width:0%}50%{width:80%}100%{width:0%}
}
pre{
margin-top:15px;
background:#0f172a;
padding:14px;
border-radius:12px;
max-height:240px;
overflow:auto;
font-size:13px;
}
.status{
margin-top:10px;
text-align:center;
color:#94a3b8;
}
</style>
</head>
<body>

<div class="wrap">
<h1>MOREEMM LUA Generator</h1>

<input id="appid" placeholder="Steam AppID">

<button onclick="generate()">Generate LUA</button>

<div class="loader" id="load"><div class="bar"></div></div>

<div class="status" id="status"></div>

<pre id="preview"></pre>
</div>

<script>
const DEPOT_KEYS =
"https://raw.githubusercontent.com/SteamAutoCracks/ManifestHub/main/depotkeys.json";

async function generate(){
const appid=document.getElementById("appid").value.trim();
if(!appid) return;

const status=document.getElementById("status");
const box=document.getElementById("load");
const preview=document.getElementById("preview");

box.style.display="block";
status.innerText="Fetching depot data...";
preview.textContent="";

try{
const keys=await fetch(DEPOT_KEYS).then(r=>r.json());

const dataUrl=
`https://raw.githubusercontent.com/SteamAutoCracks/ManifestHub/main/manifests/${appid}.json`;

const depots=await fetch(dataUrl).then(r=>{
if(!r.ok) throw 0;
return r.json();
});

let lua=`-- Generated by MOREEMM LUA GENERATOR\naddappid(${appid})\n`;

Object.keys(depots)
.sort((a,b)=>Number(a)-Number(b))
.forEach(d=>{
const key=keys[d]||"";
lua+=`addappid(${d}, 1, "${key}")\n`;
lua+=`setManifestid(${d},"${depots[d]}")\n`;
});

box.style.display="none";
status.innerText=`${Object.keys(depots).length} depots loaded`;

preview.textContent=lua;

download(lua,`${appid}.lua`);

}catch{
box.style.display="none";
status.innerText="❌ Bu AppID ManifestHub’da yok";
}
}

function download(text,name){
const blob=new Blob([text],{type:"text/plain"});
const a=document.createElement("a");
a.href=URL.createObjectURL(blob);
a.download=name;
a.click();
}
</script>

</body>
</html>
