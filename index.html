<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MOREEMM LUA Generator</title>
<style>
body{
background:#0b1220;
color:#e5e7eb;
font-family:Arial;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
}
.card{
background:#020617;
padding:35px;
border-radius:16px;
width:360px;
text-align:center;
box-shadow:0 0 25px rgba(0,0,0,.6);
}
input,button{
width:100%;
padding:12px;
border-radius:10px;
border:none;
font-size:16px;
margin-top:12px;
}
button{
background:#22c55e;
cursor:pointer;
}
pre{
background:#020617;
padding:12px;
margin-top:15px;
border-radius:10px;
max-height:200px;
overflow:auto;
font-size:13px;
}
</style>
</head>
<body>

<div class="card">
<h2>MOREEMM LUA Generator</h2>

<input id="appid" placeholder="Steam AppID">

<button onclick="generate()">Generate LUA</button>

<pre id="output"></pre>
</div>

<script>
const DEPOT_KEYS_URL = "https://raw.githubusercontent.com/SteamAutoCracks/ManifestHub/main/depotkeys.json";

async function generate(){
  const appid = document.getElementById("appid").value.trim();
  if(!appid) return;

  const out = document.getElementById("output");
  out.textContent = "Loading...";

  try{
    const keys = await fetch(DEPOT_KEYS_URL).then(r=>r.json());

    // ManifestHub yapısına göre manifest listesi
    const manifestUrl =
      `https://raw.githubusercontent.com/SteamAutoCracks/ManifestHub/main/manifests/${appid}.json`;

    const manifests = await fetch(manifestUrl).then(r=>{
      if(!r.ok) throw "Manifest not found";
      return r.json();
    });

    let lua = `-- Generated by MOREEMM LUA GENERATOR\naddappid(${appid})\n`;

    Object.keys(manifests)
      .sort((a,b)=>Number(a)-Number(b))
      .forEach(d=>{
        const key = keys[d] || "";
        lua += `addappid(${d}, 1, "${key}")\n`;
        lua += `setManifestid(${d},"${manifests[d]}")\n`;
      });

    out.textContent = lua;

    download(lua, `${appid}.lua`);

  }catch(e){
    out.textContent = "Depot data bulunamadı!";
  }
}

function download(text, name){
  const blob = new Blob([text], {type:"text/plain"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = name;
  a.click();
}
</script>

</body>
</html>
