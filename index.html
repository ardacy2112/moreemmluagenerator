<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>MOREEMM LUA Generator</title>
<style>
body{
background:#020617;
color:#e5e7eb;
font-family:Segoe UI,Arial;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
}
.box{
background:#020617;
padding:40px;
border-radius:18px;
width:420px;
box-shadow:0 0 35px rgba(0,0,0,.8);
}
input,button{
width:100%;
padding:14px;
border-radius:12px;
border:none;
font-size:16px;
margin-top:12px;
}
input{background:#0f172a;color:white;}
button{background:#22c55e;cursor:pointer;}
.loader{
height:8px;
background:#0f172a;
border-radius:8px;
margin-top:16px;
overflow:hidden;
display:none;
}
.bar{
height:100%;
background:#22c55e;
animation:load 1.3s infinite;
}
@keyframes load{0%{width:0%}50%{width:80%}100%{width:0%}}
pre{
margin-top:14px;
background:#0f172a;
padding:12px;
border-radius:12px;
max-height:240px;
overflow:auto;
font-size:13px;
}
.status{text-align:center;margin-top:10px;color:#94a3b8;}
</style>
</head>
<body>

<div class="box">
<h2>MOREEMM LUA Generator</h2>

<input id="appid" placeholder="Steam AppID">

<button onclick="generate()">Generate LUA</button>

<div class="loader" id="loader"><div class="bar"></div></div>
<div class="status" id="status"></div>
<pre id="preview"></pre>
</div>

<script>
const KEYS =
"https://raw.githubusercontent.com/SteamAutoCracks/ManifestHub/main/depotkeys.json";

async function generate(){
const appid=document.getElementById("appid").value.trim();
if(!appid) return;

const loader=document.getElementById("loader");
const status=document.getElementById("status");
const preview=document.getElementById("preview");

loader.style.display="block";
status.innerText="Loading depot dump...";
preview.textContent="";

try{
const keys=await fetch(KEYS).then(r=>r.json());

const dumpUrl=
`https://raw.githubusercontent.com/SteamAutoCracks/ManifestHub/main/dumps/${appid}.json`;

const dump=await fetch(dumpUrl).then(r=>{
if(!r.ok) throw 0;
return r.json();
});

const depots=dump.depots;

let lua=`-- Generated by MOREEMM LUA GENERATOR\naddappid(${appid})\n`;

Object.keys(depots)
.sort((a,b)=>Number(a)-Number(b))
.forEach(d=>{
const key=keys[d]||"";
lua+=`addappid(${d}, 1, "${key}")\n`;
lua+=`setManifestid(${d},"${depots[d]}")\n`;
});

loader.style.display="none";
status.innerText=`${Object.keys(depots).length} depots loaded`;
preview.textContent=lua;

download(lua,`${appid}.lua`);

}catch{
loader.style.display="none";
status.innerText="❌ Depot dump bulunamadı";
}
}

function download(text,name){
const blob=new Blob([text],{type:"text/plain"});
const a=document.createElement("a");
a.href=URL.createObjectURL(blob);
a.download=name;
a.click();
}
</script>

</body>
</html>
