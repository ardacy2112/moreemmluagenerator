<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MOREEMM Generator</title>
<style>
body{
    background:#0b0b0b;
    color:#eaeaea;
    font-family:Arial,Helvetica,sans-serif;
    display:flex;
    align-items:center;
    justify-content:center;
    height:100vh;
}
.box{
    width:520px;
    padding:25px;
    background:#151515;
    border-radius:12px;
    box-shadow:0 0 20px rgba(0,0,0,.7);
}
input,button,textarea{
    width:100%;
    margin-top:10px;
    padding:10px;
    border-radius:8px;
    border:none;
    font-size:14px;
}
input,textarea{background:#222;color:#eee;}
button{background:#2d7dff;color:white;cursor:pointer;}
textarea{height:240px;resize:none;}
.popup{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.85);
    display:flex;
    align-items:center;
    justify-content:center;
}
.popupBox{
    background:#151515;
    padding:25px;
    border-radius:12px;
    width:420px;
    text-align:center;
}
.popupBox button{margin-top:15px}
</style>
</head>
<body>

<div class="popup" id="disclaimer">
  <div class="popupBox">
    <h2>Disclaimer</h2>
    <p>Educational use only.</p>
    <button onclick="closePopup()">I Understand</button>
  </div>
</div>

<div class="box">
<h2>MOREEMM Generator</h2>

<input id="appid" placeholder="Enter AppID">

<button onclick="generate()">Generate</button>

<textarea id="output"></textarea>
</div>

<script>
let depotKeys = {}

async function loadKeys(){
  const r = await fetch("https://raw.githubusercontent.com/SteamAutoCracks/ManifestHub/main/depotkeys.json")
  depotKeys = await r.json()
}

loadKeys()

function closePopup(){
  document.getElementById("disclaimer").style.display="none"
}

async function generate(){
  const appid = document.getElementById("appid").value.trim()
  if(!appid) return

  const res = await fetch(`https://api.steamcmd.net/v1/info/${appid}`)
  const data = await res.json()

  let depots = data.data[appid].depots

  let out = `-- Generated by MOREEMM\naddappid(${appid})\n`

  for(let d in depots){
    if(!depots[d].manifests) continue

    let manifest = depots[d].manifests.public.gid
    let key = depotKeys[d] || ""

    out += `addappid(${d}, 1, "${key}")\n`
    out += `setManifestid(${d},"${manifest}")\n`
  }

  document.getElementById("output").value = out
}
</script>

</body>
</html>
