<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>MOREEMM LUA GENERATOR</title>

<style>
body{
margin:0;background:#050b1a;color:white;font-family:Segoe UI;
display:flex;justify-content:center;align-items:center;height:100vh}

.container{
background:#0f172a;padding:35px;width:440px;border-radius:22px;
box-shadow:0 0 40px #000;text-align:center}

.logo{
font-size:32px;font-weight:bold;color:#22c55e;margin-bottom:15px}

input,button{
width:100%;padding:12px;border-radius:12px;border:none;margin-top:10px;font-size:16px}

button{
background:#22c55e;font-weight:bold;cursor:pointer}

.bar-wrap{background:#1e293b;border-radius:20px;margin-top:15px;overflow:hidden}
.bar{height:18px;width:0%;background:#22c55e;transition:.4s}

.log{
background:#020617;margin-top:15px;padding:10px;border-radius:12px;
height:140px;overflow:auto;font-size:13px}

/* popup */
.popup{
position:fixed;inset:0;background:rgba(0,0,0,.85);
display:flex;justify-content:center;align-items:center}

.popup-box{
background:#0f172a;padding:30px;border-radius:20px;width:400px;text-align:center}

.popup button{margin-top:20px}
</style>
</head>
<body>

<div class="popup" id="popup">
<div class="popup-box">
<h2>Disclaimer</h2>
<p>
This website and its tools are provided for educational purposes only.
Please use at your own responsibility.
</p>
<p>Â© 2026 MOREEMM</p>
<button onclick="accept()">I Understand</button>
</div>
</div>

<div class="container">
<div class="logo">MOREEMM</div>

<input id="appid" placeholder="Enter AppID">
<button onclick="run()">Generate LUA ZIP</button>

<div class="bar-wrap"><div class="bar" id="bar"></div></div>
<div class="log" id="log"></div>
</div>

<script>
const DEPOTKEY_URL="https://raw.githubusercontent.com/SteamAutoCracks/ManifestHub/main/depotkeys.json";

function accept(){
 document.getElementById("popup").style.display="none";
}

function log(t){document.getElementById("log").innerHTML+=t+"<br>";}

async function run(){
 let appid=document.getElementById("appid").value.trim();
 if(!appid) return;

 let bar=document.getElementById("bar");
 bar.style.width="15%"; log("Fetching Steam data...");

 let steam=await fetch(`https://api.steamcmd.net/v1/info/${appid}`).then(r=>r.json());
 if(!steam.data||!steam.data[appid]){log("App not found");return;}

 bar.style.width="40%"; log("Loading depot keys...");

 let keys=await fetch(DEPOTKEY_URL).then(r=>r.json());

 let depots=steam.data[appid].depots;
 let lua=`-- Generated by MOREEMM LUA GENERATOR\naddappid(${appid})\n`;

 let count=0;
 for(let id in depots){
  let m=depots[id].manifests?.public?.gid;
  if(!m) continue;
  lua+=`addappid(${id},1,"${keys[id]||""}")\n`;
  lua+=`setManifestid(${id},"${m}")\n`;
  count++;
 }

 if(!count){log("No depots found");return;}

 bar.style.width="80%"; log(`${count} depots processed`);

 downloadZip(appid,lua);

 bar.style.width="100%"; log("ZIP downloaded");
}

function downloadZip(appid,content){
 let zipHeader = new Uint8Array([80,75,3,4]); // minimal zip trick
 let blob = new Blob([content],{type:"application/zip"});

 let a=document.createElement("a");
 a.href=URL.createObjectURL(blob);
 a.download=`${appid}.zip`;
 a.click();
}
</script>

</body>
</html>
