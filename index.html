<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MOREEMM Generator</title>
<style>
body{
background:#050510;
color:#0ff;
font-family:Arial;
text-align:center;
padding:40px
}

input,button{
padding:12px;
border-radius:8px;
border:none;
font-size:16px
}

button{
background:linear-gradient(90deg,#0ff,#f0f,#0ff);
color:black;
cursor:pointer;
font-weight:bold
}

#console{
margin-top:20px;
background:#000;
padding:15px;
height:220px;
overflow:auto;
border:2px solid cyan;
text-align:left;
font-family:monospace
}

.popup{
position:fixed;
top:-300px;
left:50%;
transform:translateX(-50%);
background:#000;
border:2px solid cyan;
padding:25px;
width:80%;
max-width:420px;
color:#0ff;
transition:.7s ease;
z-index:999
}

.popup.show{
top:80px
}
</style>
</head>
<body>

<h1>⚡ MOREEMM AUTO GENERATOR ⚡</h1>

<input id="appid" placeholder="Enter Steam AppID">
<button onclick="generate()">Generate</button>

<div id="console"></div>

<div class="popup" id="popup">
<h3>Disclaimer</h3>
<p>This tool is for educational purposes only.<br>Use at your own responsibility.</p>
<button onclick="closePopup()">I Understand</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>

<script>
setTimeout(()=>document.getElementById("popup").classList.add("show"),400)

function closePopup(){
document.getElementById("popup").classList.remove("show")
}

function log(t){
document.getElementById("console").innerHTML+=t+"<br>"
}

async function generate(){
let appid=document.getElementById("appid").value.trim()
if(!appid) return

log("Loading AppID "+appid+" ...")

let res=await fetch(`https://api.steamcmd.net/v1/info/${appid}`)
let data=await res.json()

let depots=data.data[appid].depots
let lua=[]
lua.push("-- Generated by MOREEMM")

for(let d in depots){
let depot=depots[d]
if(!depot.manifests) continue

let manifest=""

if(depot.manifests.public && depot.manifests.public.gid){
manifest=String(depot.manifests.public.gid)
}else{
let m=Object.values(depot.manifests)[0]
if(m && m.gid) manifest=String(m.gid)
}

if(!manifest) continue

let key=depot.depotkey || ""

lua.push(`addappid(${d}, 1, "${key}")`)
lua.push(`setManifestid(${d},"${manifest}")`)

log("✔ Depot "+d+" manifest loaded")
}

let zip=new JSZip()
zip.file(`${appid}.lua`, lua.join("\n"))

zip.generateAsync({type:"blob"}).then(blob=>{
let a=document.createElement("a")
a.href=URL.createObjectURL(blob)
a.download=appid+".zip"
a.click()
log("ZIP downloaded successfully")
})
}
</script>

</body>
</html>
